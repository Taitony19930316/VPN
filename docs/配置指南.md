# 智能分流VPN配置指南

## 概述

这个项目提供了一套完整的智能分流VPN解决方案，专门为开发者设计，能够：

- 🎯 **智能识别**：自动区分国内外网站，无需手动切换
- 🚀 **开发优化**：针对GitHub、npm、pip等开发工具特别优化
- ⚡ **高性能**：国内网站直连，国外网站走代理，最大化速度
- 🛡️ **安全可靠**：支持多种加密协议，保护数据安全

## 支持的客户端

### 1. Clash (推荐)
- **Windows**: Clash for Windows
- **macOS**: Clash X Pro
- **Linux**: Clash Premium

### 2. V2Ray
- **Windows**: V2RayN
- **macOS**: V2RayU
- **Linux**: V2Ray Core

## 快速开始

### Windows用户

1. 下载并安装 [Clash for Windows](https://github.com/Fndroid/clash_for_windows_pkg/releases)
2. 运行配置脚本：
   ```cmd
   scripts\setup-windows.bat
   ```
3. 在Clash中导入配置文件
4. 开启系统代理

### macOS用户

1. 运行自动配置脚本：
   ```bash
   chmod +x scripts/setup-macos.sh
   ./scripts/setup-macos.sh
   ```
2. 配置系统代理（可选）

### Linux用户

1. 安装Clash Premium
2. 复制配置文件到 `~/.config/clash/`
3. 启动Clash服务

## 开发工具配置

运行开发工具配置脚本，自动配置Git、npm、pip等工具的代理：

```bash
chmod +x scripts/dev-tools-config.sh
./scripts/dev-tools-config.sh
```

配置完成后，你可以使用以下命令管理代理：

- `proxy_on` - 开启终端代理
- `proxy_off` - 关闭终端代理
- `proxy_status` - 查看代理状态

## 服务器配置

### 修改Clash配置

编辑 `config/clash-config.yaml`，替换以下信息：

```yaml
proxies:
  - name: "你的VPN服务器"
    type: ss  # 协议类型：ss, vmess, trojan等
    server: your-server.com  # 服务器地址
    port: 443  # 端口
    cipher: aes-256-gcm  # 加密方式
    password: "your-password"  # 密码
```

### V2Ray配置

编辑 `config/v2ray-config.json`，修改服务器信息：

```json
{
  "address": "your-server.com",
  "port": 443,
  "users": [
    {
      "id": "your-uuid-here",
      "alterId": 0
    }
  ]
}
```

## 分流规则说明

### 走代理的网站
- GitHub相关：github.com, githubusercontent.com
- 包管理器：npmjs.org, pypi.org
- Google服务：google.com, googleapis.com
- 开发工具：stackoverflow.com, docker.com

### 直连的网站
- 国内网站：baidu.com, taobao.com, bilibili.com
- 国内开发：gitee.com, cnpmjs.org
- 局域网和中国IP段

### 自定义规则

你可以在配置文件中添加自定义规则：

```yaml
rules:
  # 添加需要代理的域名
  - DOMAIN-SUFFIX,your-domain.com,🚀 节点选择
  
  # 添加需要直连的域名
  - DOMAIN-SUFFIX,your-local-domain.com,🎯 全球直连
```

## 测试配置

配置完成后，使用以下命令测试：

```bash
# 测试GitHub访问（应该走代理）
curl -I https://github.com

# 测试百度访问（应该直连）
curl -I https://baidu.com

# 测试npm（应该走代理）
npm info react

# 查看当前IP
curl ipinfo.io
```

## 常见问题

### Q: GitHub还是访问不了？
A: 检查代理服务器是否正常，确认防火墙设置

### Q: 国内网站变慢了？
A: 检查是否正确配置了直连规则，确保国内网站不走代理

### Q: 如何添加新的分流规则？
A: 编辑配置文件中的rules部分，添加相应的域名规则

### Q: 代理不生效？
A: 确认系统代理设置正确，端口为7890（HTTP）或7891（SOCKS）

## 性能优化建议

1. **选择就近服务器**：选择延迟最低的服务器节点
2. **合理配置DNS**：使用国内DNS解析国内域名
3. **定期更新规则**：保持分流规则的时效性
4. **监控流量**：定期检查流量使用情况

## 安全注意事项

1. 定期更新客户端版本
2. 使用强密码和加密协议
3. 不要在公共网络下使用
4. 定期检查服务器安全性

## 技术支持

如果遇到问题，请检查：

1. 服务器连接状态
2. 本地防火墙设置
3. 代理软件日志
4. 网络连接状态

更多技术细节请参考各客户端的官方文档。